{% extends "base.html" %}
{% load static %}

{% block h2 %}Account Details{% endblock %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{% static 'mainapp/css/pagenation.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'mainapp/css/profile_card.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'mainapp/css/post_card.css' %}">
{% endblock style %}

{% block content %}
<div class="container mt-4">
    
    {% include 'mainapp/account/_profile_card.html' %}
    <!-- Nav Bar -->
    <ul class="nav nav-tabs mt-4">
        <li class="nav-item">
            <a class="nav-link {% if not request.GET.nav or request.GET.nav == 'posts' %}active{% endif %}" href="?nav=posts">Posts</a>
        </li>
        {% if user.is_trusted %}
        <li class="nav-item">
            <a class="nav-link {% if request.GET.nav == 'approved' %}active{% endif %}" href="?nav=approved">Approved Posts</a>
        </li>
        <li class="nav-item">
            <a class="nav-link {% if request.GET.nav == 'disapproved' %}active{% endif %}" href="?nav=disapproved">Disapproved Posts</a>
        </li>
        {% endif %}
    </ul>

    <!-- Posts Section -->
    <div id="posts-container" class="mt-4">
        {% include 'mainapp/post/_posts_section.html' %}
    </div>
</div>
{% endblock %}

{% block script %}
<script src="{% static 'mainapp/js/post_card.js' %}"></script>
<script>
    $(document).ready(function(){
        $('.nav-link').click(function(e){
            e.preventDefault();
            $('.nav-link').removeClass('active');
            $(this).addClass('active');
            var url = $(this).attr('href');
            $.ajax({
                url: url,
                success: function(data) {
                    $('#posts-container').html(data);
                    show_less_more();

                }
            });
        });
    });
</script>
{% endblock %}